---
phase: 03-bilingual-integration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - app/[locale]/blog/[slug]/mdx-content.tsx
autonomous: true

must_haves:
  truths:
    - "Hebrew posts render with RTL direction, borders and padding on correct side"
    - "English posts render with LTR direction"
    - "Code blocks within Hebrew content maintain LTR direction (code not reversed)"
    - "Blockquotes show border on inline-start side (right in RTL, left in LTR)"
    - "Lists show markers on inline-start side"
    - "Content loads correctly based on locale (I18N-05 - satisfied by Phase 2 Velite implementation)"
  artifacts:
    - path: "app/[locale]/blog/[slug]/mdx-content.tsx"
      provides: "Direction-aware prose styling with CSS logical properties"
      contains: "border-s-4"
      contains: "prose-pre:[direction:ltr]"
  key_links:
    - from: "app/[locale]/blog/[slug]/mdx-content.tsx"
      to: "locale prop"
      via: "dir attribute on wrapper div"
      pattern: 'dir=.*locale.*"rtl".*"ltr"'
---

<objective>
Update MDX prose wrapper to use CSS logical properties for proper RTL/LTR rendering

Purpose: Hebrew content currently shows blockquote borders on the wrong side and list markers in wrong position because the prose wrapper uses physical CSS properties (border-l, pl-) instead of logical properties (border-s, ps-). Code blocks also need explicit LTR direction to prevent reversal in RTL context.

Output: Updated mdx-content.tsx with direction-aware styling that works correctly in both Hebrew (RTL) and English (LTR) contexts.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03-bilingual-integration/03-RESEARCH.md

@app/[locale]/blog/[slug]/mdx-content.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update MDX prose wrapper with CSS logical properties and direction handling</name>
  <files>app/[locale]/blog/[slug]/mdx-content.tsx</files>
  <action>
Update the prose className in MDXContent component to use CSS logical properties and ensure proper direction handling:

1. Ensure dir attribute on wrapper div is set based on locale:
   - Must have: `dir={locale === "he" ? "rtl" : "ltr"}`
   - If missing, add it to the wrapper div

2. Replace physical properties with logical equivalents for blockquotes:
   - `prose-blockquote:border-l-4` -> `prose-blockquote:border-s-4`
   - `prose-blockquote:pl-6` -> `prose-blockquote:ps-6`

3. Add logical padding for lists:
   - Add `prose-ul:ps-6 prose-ol:ps-6`
   - This ensures list markers appear on inline-start side (right in RTL, left in LTR)

4. Add direction isolation for code blocks to prevent reversal in RTL:
   - Add `prose-code:[direction:ltr]`
   - Add `prose-code:[unicode-bidi:isolate]`
   - Add `prose-pre:[direction:ltr]`

The key changes from physical to logical:
- `l` (left) -> `s` (start) for inline-start
- `r` (right) -> `e` (end) for inline-end

This ensures:
- In RTL (Hebrew): border appears on RIGHT (start), padding on RIGHT, lists on RIGHT
- In LTR (English): border appears on LEFT (start), padding on LEFT, lists on LEFT
  </action>
  <verify>
1. Run `npm run build` to verify no compilation errors
2. Visual check: Visit /he/blog/mvp-4-week-sprint-guide:
   - Blockquotes should have border on RIGHT
   - List bullets/numbers should appear on RIGHT
   - Code blocks should NOT be reversed (function names readable left-to-right)
3. Visual check: Visit /en/blog/mvp-4-week-sprint-guide:
   - Blockquotes should have border on LEFT
   - List bullets/numbers should appear on LEFT
   - Code blocks render normally
4. Nested lists should indent correctly in both directions
  </verify>
  <done>
- MDX prose wrapper uses CSS logical properties (border-s-4, ps-6)
- Dir attribute ensures RTL/LTR direction based on locale
- Code blocks have explicit LTR direction with unicode-bidi isolation
- Lists show markers on inline-start side in both locales
- Hebrew posts render with correct RTL styling
- English posts render with correct LTR styling
  </done>
</task>

</tasks>

<verification>
After completing both tasks:

1. Build verification:
   ```bash
   npm run build
   ```
   Must complete without errors.

2. RTL visual verification (Hebrew):
   - Visit http://localhost:3000/he/blog/mvp-4-week-sprint-guide
   - Blockquote border appears on RIGHT side
   - List bullets/numbers appear on RIGHT side
   - Code blocks render LEFT-TO-RIGHT (not reversed)
   - Overall text direction is right-to-left

3. LTR visual verification (English):
   - Visit http://localhost:3000/en/blog/mvp-4-week-sprint-guide
   - Blockquote border appears on LEFT side
   - List bullets/numbers appear on LEFT side
   - Code blocks render LEFT-TO-RIGHT (normal)
   - Overall text direction is left-to-right

4. Requirements coverage:
   - I18N-01: Hebrew content renders with RTL direction [CHECK]
   - I18N-02: English content renders with LTR direction [CHECK]
   - I18N-03: MDX components are direction-aware [CHECK]
   - I18N-04: Mixed direction text (code in Hebrew) renders correctly [CHECK]
   - I18N-05: Content loads based on current locale from next-intl [SATISFIED BY PHASE 2]
     (Velite filters posts by locale, blog pages use locale from next-intl routing)
</verification>

<success_criteria>
- `npm run build` passes
- Blockquotes have border on inline-start side in both locales
- Lists have markers on inline-start side in both locales
- Code blocks maintain LTR direction in Hebrew content
- No visual regressions in English content
</success_criteria>

<output>
After completion, create `.planning/phases/03-bilingual-integration/03-01-SUMMARY.md`
</output>
