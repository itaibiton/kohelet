---
phase: 03-bilingual-integration
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - velite.config.ts
  - content/authors/kohelet-digital.json
  - components/blog/author-profile.tsx
  - app/[locale]/blog/[slug]/page.tsx
autonomous: false

must_haves:
  truths:
    - "Posts display author name"
    - "Posts display author avatar"
    - "Posts display author bio"
    - "Author profile adapts to RTL/LTR layout"
  artifacts:
    - path: "velite.config.ts"
      provides: "Author collection schema"
      contains: "defineCollection"
      contains: "authors"
    - path: "content/authors/kohelet-digital.json"
      provides: "Author profile data"
      contains: "name"
      contains: "bio"
      contains: "avatar"
    - path: "components/blog/author-profile.tsx"
      provides: "Author profile display component"
      exports: ["AuthorProfile"]
    - path: "app/[locale]/blog/[slug]/page.tsx"
      provides: "Blog post page with author rendering"
      contains: "AuthorProfile"
  key_links:
    - from: "velite.config.ts"
      to: "content/authors/*.json"
      via: "defineCollection pattern"
      pattern: "pattern.*authors"
    - from: "app/[locale]/blog/[slug]/page.tsx"
      to: "components/blog/author-profile.tsx"
      via: "import and render"
      pattern: "import.*AuthorProfile"
    - from: "components/blog/author-profile.tsx"
      to: "@/.velite"
      via: "Author type import"
      pattern: "from.*\\.velite"
---

<objective>
Implement author profiles with Velite schema, profile data, and display component

Purpose: Blog posts currently show only the author string from frontmatter. Users should see a richer author profile with avatar and bio. This completes the AUTH-01, AUTH-02, AUTH-03 requirements.

Output: Author collection in Velite, JSON profile for "Kohelet Digital", AuthorProfile component, and wiring in blog post page.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03-bilingual-integration/03-RESEARCH.md

@velite.config.ts
@app/[locale]/blog/[slug]/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add author collection to Velite config</name>
  <files>velite.config.ts</files>
  <action>
Extend velite.config.ts to add an Author collection:

1. Define the authors collection:
```typescript
const authors = defineCollection({
  name: 'Author',
  pattern: 'authors/*.json',
  schema: s.object({
    id: s.string(),
    name: s.string().max(100),
    bio: s.string().max(500),
    avatar: s.string(), // Path relative to public/
  }),
});
```

2. Add authors to the collections export:
```typescript
export default defineConfig({
  // ... existing config
  collections: { posts, authors },
});
```

The author ID will match the frontmatter `author` field in posts (e.g., "Kohelet Digital" -> needs matching author JSON).

Note: For simplicity, we use runtime lookup from the authors array rather than Velite transform embedding. This keeps the schema clean and allows author data to be used independently.
  </action>
  <verify>
Run `npm run velite` - should succeed and generate types including Author
Check `.velite/index.ts` contains `authors` export
  </verify>
  <done>
- Author collection defined in velite.config.ts
- Velite generates Author type
- authors array exported from .velite
  </done>
</task>

<task type="auto">
  <name>Task 2: Create author profile JSON</name>
  <files>content/authors/kohelet-digital.json</files>
  <action>
Create the content/authors/ directory and add the Kohelet Digital author profile:

1. Create directory: `content/authors/`

2. Create `content/authors/kohelet-digital.json`:
```json
{
  "id": "Kohelet Digital",
  "name": "Kohelet Digital",
  "bio": "We engineer high-performance software ecosystems with AI integration. Building digital products for Israeli startups and enterprises.",
  "avatar": "/images/kohelet-avatar.png"
}
```

Note: The `id` field must match the `author` field in post frontmatter exactly ("Kohelet Digital").

3. For the avatar, create a placeholder if needed. The actual avatar image should be placed at `public/images/kohelet-avatar.png`. If no image exists, use a placeholder path and note this in the summary for follow-up.
  </action>
  <verify>
Run `npm run velite` - should parse the JSON without errors
Check `.velite/index.ts` - authors array should contain the profile
  </verify>
  <done>
- content/authors/kohelet-digital.json exists with valid schema
- Velite successfully parses the author profile
- Author data available in generated .velite output
  </done>
</task>

<task type="auto">
  <name>Task 3: Create AuthorProfile component</name>
  <files>components/blog/author-profile.tsx</files>
  <action>
Create an RTL-aware author profile component:

1. Create directory if needed: `components/blog/`

2. Create `components/blog/author-profile.tsx`:

```typescript
import Image from 'next/image';
import { cn } from '@/lib/utils';

interface AuthorProfileProps {
  name: string;
  bio: string;
  avatar: string;
  locale: string;
}

export function AuthorProfile({ name, bio, avatar, locale }: AuthorProfileProps) {
  const isRtl = locale === 'he';

  return (
    <div className={cn(
      "flex items-center gap-4 py-6 border-t border-neutral-800",
      isRtl && "flex-row-reverse"
    )}>
      <Image
        src={avatar}
        alt={name}
        width={64}
        height={64}
        className="rounded-full"
      />
      <div className={cn(isRtl && "text-end")}>
        <p className="font-semibold text-white">
          <bdi>{name}</bdi>
        </p>
        <p className="text-sm text-neutral-400 mt-1">
          {bio}
        </p>
      </div>
    </div>
  );
}
```

Key RTL considerations:
- Use `flex-row-reverse` to put avatar on right in RTL
- Use `text-end` for right-aligned text in RTL
- Wrap name in `<bdi>` for safe bidirectional isolation

Note: Using plain props interface instead of Author type to keep component decoupled. The parent component does the lookup.
  </action>
  <verify>
TypeScript compilation: `npx tsc --noEmit` should pass
Component exports AuthorProfile function
  </verify>
  <done>
- AuthorProfile component created at components/blog/author-profile.tsx
- Component handles RTL/LTR layout correctly
- Avatar, name, and bio displayed
  </done>
</task>

<task type="auto">
  <name>Task 4: Wire author profile to blog post page</name>
  <files>app/[locale]/blog/[slug]/page.tsx</files>
  <action>
Update the blog post page to display author profile:

1. Import the authors array and AuthorProfile:
```typescript
import { posts, authors } from "@/.velite";
import { AuthorProfile } from "@/components/blog/author-profile";
```

2. In the BlogPostPage component, look up the author:
```typescript
// After finding the post
const author = authors.find(a => a.id === post.author);
```

3. Replace the current author display (line ~199-201) with the AuthorProfile component. Place it after the meta information section, before the MDX content:
```typescript
{/* Author Profile */}
{author && (
  <AuthorProfile
    name={author.name}
    bio={author.bio}
    avatar={author.avatar}
    locale={locale}
  />
)}
```

4. Keep the existing author name in the meta info for quick reference, but add the full profile card below.

Location in JSX: After the meta information div (around line 209), before MDXContent.
  </action>
  <verify>
Run `npm run build` - should complete without errors
Visit /en/blog/mvp-4-week-sprint-guide - should show author profile with avatar
Visit /he/blog/mvp-4-week-sprint-guide - should show author profile with RTL layout
  </verify>
  <done>
- Blog posts display author name, avatar, and bio
- Author profile renders correctly in both RTL and LTR
- Fallback graceful if author not found (no crash)
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete bilingual integration with RTL prose styling and author profiles:
1. MDX prose wrapper with CSS logical properties (Plan 03-01)
2. Author collection in Velite with JSON profiles
3. AuthorProfile component with RTL support
4. Author profile displayed on blog posts
  </what-built>
  <how-to-verify>
1. Start dev server: `npm run dev`

2. Check Hebrew post (http://localhost:3000/he/blog/mvp-4-week-sprint-guide):
   - [ ] Text flows right-to-left
   - [ ] Blockquotes have border on RIGHT side
   - [ ] List bullets appear on RIGHT side
   - [ ] Code blocks are NOT reversed (readable)
   - [ ] Author profile shows avatar on RIGHT, text on LEFT
   - [ ] Author name and bio visible

3. Check English post (http://localhost:3000/en/blog/mvp-4-week-sprint-guide):
   - [ ] Text flows left-to-right
   - [ ] Blockquotes have border on LEFT side
   - [ ] List bullets appear on LEFT side
   - [ ] Code blocks normal (readable)
   - [ ] Author profile shows avatar on LEFT, text on RIGHT
   - [ ] Author name and bio visible

4. Check avatar image loads (if placeholder, note for follow-up)
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
After completing all tasks:

1. Build verification:
   ```bash
   npm run velite && npm run build
   ```
   Must complete without errors.

2. Type safety:
   ```bash
   npx tsc --noEmit
   ```
   Must pass.

3. Requirements coverage:
   - AUTH-01: Posts display author name [CHECK]
   - AUTH-02: Posts display author avatar [CHECK]
   - AUTH-03: Posts display author bio [CHECK]
   - I18N-05: Content loads based on locale [CHECK - verified in prior phase]
</verification>

<success_criteria>
- `npm run velite` generates Author type and authors array
- `npm run build` completes without errors
- Author profile visible on blog posts with avatar, name, bio
- RTL layout correct (avatar right, text left in Hebrew)
- LTR layout correct (avatar left, text right in English)
</success_criteria>

<output>
After completion, create `.planning/phases/03-bilingual-integration/03-02-SUMMARY.md`
</output>
